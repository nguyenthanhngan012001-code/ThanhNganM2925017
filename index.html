<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>H·ªá Th·ªëng ƒêo Ch·∫•t L∆∞·ª£ng Kh√¥ng Kh√≠</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .main-card {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            margin-bottom: 30px;
        }

        .location-selector {
            display: flex;
            gap: 15px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .location-selector select, .location-selector button {
            padding: 12px 20px;
            border-radius: 10px;
            border: 2px solid #e0e0e0;
            font-size: 16px;
            transition: all 0.3s;
        }

        .location-selector select {
            flex: 1;
            min-width: 200px;
        }

        .btn-refresh {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            cursor: pointer;
            font-weight: bold;
        }

        .btn-refresh:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .aqi-display {
            text-align: center;
            padding: 40px;
            border-radius: 15px;
            margin-bottom: 30px;
            position: relative;
            overflow: hidden;
        }

        .aqi-value {
            font-size: 5em;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .aqi-status {
            font-size: 1.8em;
            margin-bottom: 10px;
        }

        .aqi-description {
            font-size: 1.1em;
            opacity: 0.8;
        }

        /* AQI Color Classes */
        .aqi-good {
            background: linear-gradient(135deg, #56ab2f 0%, #a8e063 100%);
            color: white;
        }

        .aqi-moderate {
            background: linear-gradient(135deg, #F2994A 0%, #F2C94C 100%);
            color: white;
        }

        .aqi-unhealthy-sensitive {
            background: linear-gradient(135deg, #f2994a 0%, #f27121 100%);
            color: white;
        }

        .aqi-unhealthy {
            background: linear-gradient(135deg, #eb3349 0%, #f45c43 100%);
            color: white;
        }

        .aqi-very-unhealthy {
            background: linear-gradient(135deg, #8e44ad 0%, #c0392b 100%);
            color: white;
        }

        .aqi-hazardous {
            background: linear-gradient(135deg, #4b0082 0%, #8b0000 100%);
            color: white;
        }

        .pollutants-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .pollutant-card {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            transition: transform 0.3s;
        }

        .pollutant-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        .pollutant-name {
            font-weight: bold;
            color: #666;
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .pollutant-value {
            font-size: 2em;
            font-weight: bold;
            color: #333;
            margin-bottom: 5px;
        }

        .pollutant-unit {
            color: #999;
            font-size: 0.9em;
        }

        .chart-container {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }

        .chart-title {
            font-size: 1.5em;
            margin-bottom: 20px;
            color: #333;
            text-align: center;
        }

        .time-chart {
            display: flex;
            align-items: flex-end;
            height: 200px;
            gap: 10px;
            padding: 20px 0;
        }

        .bar {
            flex: 1;
            background: linear-gradient(to top, #667eea, #764ba2);
            border-radius: 5px 5px 0 0;
            position: relative;
            min-height: 20px;
            transition: all 0.3s;
        }

        .bar:hover {
            opacity: 0.8;
        }

        .bar-label {
            position: absolute;
            bottom: -25px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 0.8em;
            color: #666;
        }

        .recommendations {
            margin-top: 30px;
            padding: 25px;
            background: #f0f8ff;
            border-radius: 15px;
            border-left: 5px solid #667eea;
        }

        .recommendations h3 {
            color: #333;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .recommendations ul {
            list-style: none;
            padding-left: 0;
        }

        .recommendations li {
            padding: 8px 0;
            padding-left: 25px;
            position: relative;
        }

        .recommendations li:before {
            content: "‚úì";
            position: absolute;
            left: 0;
            color: #667eea;
            font-weight: bold;
        }

        .update-time {
            text-align: center;
            color: #666;
            margin-top: 20px;
            font-style: italic;
        }

        .legend {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 30px;
            flex-wrap: wrap;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .legend-color {
            width: 30px;
            height: 20px;
            border-radius: 5px;
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 1.8em;
            }
            
            .aqi-value {
                font-size: 3.5em;
            }
            
            .pollutants-grid {
                grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            }
        }

        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,.3);
            border-radius: 50%;
            border-top-color: white;
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>üåç H·ªá Th·ªëng ƒêo Ch·∫•t L∆∞·ª£ng Kh√¥ng Kh√≠</h1>
            <p>Theo d√µi v√† c·∫≠p nh·∫≠t ch·∫•t l∆∞·ª£ng kh√¥ng kh√≠ theo th·ªùi gian th·ª±c</p>
        </div>

        <!-- Main Card -->
        <div class="main-card">
            <!-- Location Selector -->
            <div class="location-selector">
                <select id="citySelect">
                    <option value="hanoi">H√† N·ªôi</option>
                    <option value="hcm">TP. H·ªì Ch√≠ Minh</option>
                    <option value="danang">ƒê√† N·∫µng</option>
                    <option value="haiphong">H·∫£i Ph√≤ng</option>
                    <option value="cantho">C·∫ßn Th∆°</option>
                </select>
                <select id="districtSelect">
                    <option value="district1">Qu·∫≠n 1</option>
                    <option value="district2">Qu·∫≠n 2</option>
                    <option value="district3">Qu·∫≠n 3</option>
                </select>
                <button class="btn-refresh" onclick="refreshData()">
                    üîÑ C·∫≠p Nh·∫≠t
                </button>
            </div>

            <!-- AQI Display -->
            <div class="aqi-display aqi-moderate" id="aqiDisplay">
                <div class="aqi-value" id="aqiValue">72</div>
                <div class="aqi-status" id="aqiStatus">Trung B√¨nh</div>
                <div class="aqi-description" id="aqiDescription">
                    Ch·∫•t l∆∞·ª£ng kh√¥ng kh√≠ ch·∫•p nh·∫≠n ƒë∆∞·ª£c. Tuy nhi√™n, ng∆∞·ªùi nh·∫°y c·∫£m c√≥ th·ªÉ g·∫∑p v·∫•n ƒë·ªÅ s·ª©c kh·ªèe nh·∫π.
                </div>
            </div>

            <!-- Pollutants Grid -->
            <div class="pollutants-grid">
                <div class="pollutant-card">
                    <div class="pollutant-name">PM2.5</div>
                    <div class="pollutant-value" id="pm25">25.4</div>
                    <div class="pollutant-unit">Œºg/m¬≥</div>
                </div>
                <div class="pollutant-card">
                    <div class="pollutant-name">PM10</div>
                    <div class="pollutant-value" id="pm10">45.2</div>
                    <div class="pollutant-unit">Œºg/m¬≥</div>
                </div>
                <div class="pollutant-card">
                    <div class="pollutant-name">O‚ÇÉ</div>
                    <div class="pollutant-value" id="o3">65.8</div>
                    <div class="pollutant-unit">Œºg/m¬≥</div>
                </div>
                <div class="pollutant-card">
                    <div class="pollutant-name">NO‚ÇÇ</div>
                    <div class="pollutant-value" id="no2">32.1</div>
                    <div class="pollutant-unit">Œºg/m¬≥</div>
                </div>
                <div class="pollutant-card">
                    <div class="pollutant-name">SO‚ÇÇ</div>
                    <div class="pollutant-value" id="so2">15.3</div>
                    <div class="pollutant-unit">Œºg/m¬≥</div>
                </div>
                <div class="pollutant-card">
                    <div class="pollutant-name">CO</div>
                    <div class="pollutant-value" id="co">0.8</div>
                    <div class="pollutant-unit">mg/m¬≥</div>
                </div>
            </div>

            <!-- Recommendations -->
            <div class="recommendations">
                <h3>üí° Khuy·∫øn Ngh·ªã</h3>
                <ul id="recommendations">
                    <li>Ng∆∞·ªùi nh·∫°y c·∫£m n√™n h·∫°n ch·∫ø ho·∫°t ƒë·ªông ngo√†i tr·ªùi k√©o d√†i</li>
                    <li>ƒê√≥ng c·ª≠a s·ªï ƒë·ªÉ tr√°nh kh√¥ng kh√≠ √¥ nhi·ªÖm b√™n ngo√†i</li>
                    <li>S·ª≠ d·ª•ng m√°y l·ªçc kh√¥ng kh√≠ trong nh√†</li>
                    <li>ƒêeo kh·∫©u trang khi ra ngo√†i n·∫øu c·∫ßn thi·∫øt</li>
                </ul>
            </div>

            <!-- Update Time -->
            <div class="update-time" id="updateTime">
                C·∫≠p nh·∫≠t l·∫ßn cu·ªëi: <span id="lastUpdate"></span>
            </div>
        </div>

        <!-- Chart Container -->
        <div class="chart-container">
            <h2 class="chart-title">Bi·ªÉu ƒê·ªì AQI Theo Gi·ªù (24h)</h2>
            <div class="time-chart" id="timeChart"></div>
            
            <!-- Legend -->
            <div class="legend">
                <div class="legend-item">
                    <div class="legend-color" style="background: linear-gradient(135deg, #56ab2f 0%, #a8e063 100%);"></div>
                    <span>T·ªët (0-50)</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: linear-gradient(135deg, #F2994A 0%, #F2C94C 100%);"></div>
                    <span>Trung b√¨nh (51-100)</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: linear-gradient(135deg, #f2994a 0%, #f27121 100%);"></div>
                    <span>Kh√¥ng t·ªët cho nh√≥m nh·∫°y c·∫£m (101-150)</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: linear-gradient(135deg, #eb3349 0%, #f45c43 100%);"></div>
                    <span>C√≥ h·∫°i (151-200)</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: linear-gradient(135deg, #8e44ad 0%, #c0392b 100%);"></div>
                    <span>R·∫•t c√≥ h·∫°i (201-300)</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: linear-gradient(135deg, #4b0082 0%, #8b0000 100%);"></div>
                    <span>Nguy hi·ªÉm (301+)</span>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Simulated data for demonstration
        let currentAQI = 72;
        
        // Generate random hourly data for chart
        function generateHourlyData() {
            const data = [];
            for (let i = 0; i < 24; i++) {
                data.push(Math.floor(Math.random() * 150) + 30);
            }
            return data;
        }

        // Update AQI display based on value
        function updateAQIDisplay(aqi) {
            const aqiDisplay = document.getElementById('aqiDisplay');
            const aqiValue = document.getElementById('aqiValue');
            const aqiStatus = document.getElementById('aqiStatus');
            const aqiDescription = document.getElementById('aqiDescription');
            const recommendations = document.getElementById('recommendations');
            
            aqiValue.textContent = aqi;
            
            // Remove all AQI classes
            aqiDisplay.className = 'aqi-display';
            
            if (aqi <= 50) {
                aqiDisplay.classList.add('aqi-good');
                aqiStatus.textContent = 'T·ªët';
                aqiDescription.textContent = 'Ch·∫•t l∆∞·ª£ng kh√¥ng kh√≠ t·ªët. Kh√¥ng c√≥ r·ªßi ro s·ª©c kh·ªèe.';
                recommendations.innerHTML = `
                    <li>Th√≠ch h·ª£p cho m·ªçi ho·∫°t ƒë·ªông ngo√†i tr·ªùi</li>
                    <li>M·ªü c·ª≠a s·ªï ƒë·ªÉ th√¥ng gi√≥ t·ª± nhi√™n</li>
                    <li>T·∫≠n h∆∞·ªüng kh√¥ng kh√≠ trong l√†nh!</li>
                `;
            } else if (aqi <= 100) {
                aqiDisplay.classList.add('aqi-moderate');
                aqiStatus.textContent = 'Trung B√¨nh';
                aqiDescription.textContent = 'Ch·∫•t l∆∞·ª£ng kh√¥ng kh√≠ ch·∫•p nh·∫≠n ƒë∆∞·ª£c. Ng∆∞·ªùi nh·∫°y c·∫£m c√≥ th·ªÉ g·∫∑p v·∫•n ƒë·ªÅ nh·∫π.';
                recommendations.innerHTML = `
                    <li>Ng∆∞·ªùi nh·∫°y c·∫£m n√™n h·∫°n ch·∫ø ho·∫°t ƒë·ªông ngo√†i tr·ªùi k√©o d√†i</li>
                    <li>ƒê√≥ng c·ª≠a s·ªï ƒë·ªÉ tr√°nh kh√¥ng kh√≠ √¥ nhi·ªÖm b√™n ngo√†i</li>
                    <li>S·ª≠ d·ª•ng m√°y l·ªçc kh√¥ng kh√≠ trong nh√†</li>
                    <li>ƒêeo kh·∫©u trang khi ra ngo√†i n·∫øu c·∫ßn thi·∫øt</li>
                `;
            } else if (aqi <= 150) {
                aqiDisplay.classList.add('aqi-unhealthy-sensitive');
                aqiStatus.textContent = 'Kh√¥ng T·ªët Cho Nh√≥m Nh·∫°y C·∫£m';
                aqiDescription.textContent = 'Ng∆∞·ªùi c√≥ b·ªánh h√¥ h·∫•p, tim m·∫°ch, tr·∫ª em v√† ng∆∞·ªùi gi√† n√™n h·∫°n ch·∫ø ra ngo√†i.';
                recommendations.innerHTML = `
                    <li>Nh√≥m nh·∫°y c·∫£m n√™n tr√°nh ho·∫°t ƒë·ªông ngo√†i tr·ªùi</li>
                    <li>Gi·∫£m ho·∫°t ƒë·ªông th·ªÉ ch·∫•t m·∫°nh ngo√†i tr·ªùi</li>
                    <li>ƒê√≥ng k√≠n c·ª≠a s·ªï v√† s·ª≠ d·ª•ng m√°y l·ªçc kh√¥ng kh√≠</li>
                    <li>ƒêeo kh·∫©u trang N95 khi ph·∫£i ra ngo√†i</li>
                `;
            } else if (aqi <= 200) {
                aqiDisplay.classList.add('aqi-unhealthy');
                aqiStatus.textContent = 'C√≥ H·∫°i Cho S·ª©c Kh·ªèe';
                aqiDescription.textContent = 'M·ªçi ng∆∞·ªùi c√≥ th·ªÉ b·ªã ·∫£nh h∆∞·ªüng s·ª©c kh·ªèe. Nh√≥m nh·∫°y c·∫£m c√≥ th·ªÉ b·ªã ·∫£nh h∆∞·ªüng nghi√™m tr·ªçng.';
                recommendations.innerHTML = `
                    <li>Tr√°nh ho·∫°t ƒë·ªông ngo√†i tr·ªùi</li>
                    <li>ƒê√≥ng k√≠n c·ª≠a v√† b·∫≠t m√°y l·ªçc kh√¥ng kh√≠</li>
                    <li>ƒêeo kh·∫©u trang N95 khi c·∫ßn thi·∫øt ph·∫£i ra ngo√†i</li>
                    <li>Theo d√µi s·ª©c kh·ªèe v√† ƒë·∫øn c∆° s·ªü y t·∫ø n·∫øu c√≥ tri·ªáu ch·ª©ng</li>
                `;
            } else if (aqi <= 300) {
                aqiDisplay.classList.add('aqi-very-unhealthy');
                aqiStatus.textContent = 'R·∫•t C√≥ H·∫°i';
                aqiDescription.textContent = 'C·∫£nh b√°o s·ª©c kh·ªèe kh·∫©n c·∫•p. To√†n b·ªô d√¢n s·ªë c√≥ th·ªÉ b·ªã ·∫£nh h∆∞·ªüng.';
                recommendations.innerHTML = `
                    <li>Kh√¥ng ra ngo√†i tr·ª´ tr∆∞·ªùng h·ª£p kh·∫©n c·∫•p</li>
                    <li>ƒê√≥ng k√≠n m·ªçi c·ª≠a s·ªï v√† l·ªó th√¥ng gi√≥</li>
                    <li>S·ª≠ d·ª•ng m√°y l·ªçc kh√¥ng kh√≠ c√¥ng su·∫•t cao</li>
                    <li>Lu√¥n ƒëeo kh·∫©u trang N95 trong nh√†</li>
                    <li>Chu·∫©n b·ªã s·∫µn thu·ªëc v√† s·ªë ƒëi·ªán tho·∫°i c·∫•p c·ª©u</li>
                `;
            } else {
                aqiDisplay.classList.add('aqi-hazardous');
                aqiStatus.textContent = 'Nguy Hi·ªÉm';
                aqiDescription.textContent = 'T√¨nh tr·∫°ng kh·∫©n c·∫•p v·ªÅ s·ª©c kh·ªèe. M·ªçi ng∆∞·ªùi ƒë·ªÅu b·ªã ·∫£nh h∆∞·ªüng.';
                recommendations.innerHTML = `
                    <li>·ªû trong nh√† v√† kh√¥ng ra ngo√†i</li>
                    <li>ƒê√≥ng k√≠n ho√†n to√†n nh√† c·ª≠a</li>
                    <li>S·ª≠ d·ª•ng m√°y l·ªçc kh√¥ng kh√≠ m·∫°nh nh·∫•t</li>
                    <li>ƒêeo kh·∫©u trang N95 c·∫£ trong nh√†</li>
                    <li>Li√™n h·ªá y t·∫ø ngay n·∫øu c√≥ tri·ªáu ch·ª©ng kh√≥ th·ªü</li>
                `;
            }
        }

        // Generate chart bars
        function generateChart() {
            const chartContainer = document.getElementById('timeChart');
            const data = generateHourlyData();
            chartContainer.innerHTML = '';
            
            data.forEach((value, index) => {
                const bar = document.createElement('div');
                bar.className = 'bar';
                bar.style.height = `${(value / 300) * 100}%`;
                
                // Set bar color based on AQI value
                if (value <= 50) {
                    bar.style.background = 'linear-gradient(to top, #56ab2f, #a8e063)';
                } else if (value <= 100) {
                    bar.style.background = 'linear-gradient(to top, #F2994A, #F2C94C)';
                } else if (value <= 150) {
                    bar.style.background = 'linear-gradient(to top, #f2994a, #f27121)';
                } else if (value <= 200) {
                    bar.style.background = 'linear-gradient(to top, #eb3349, #f45c43)';
                } else if (value <= 300) {
                    bar.style.background = 'linear-gradient(to top, #8e44ad, #c0392b)';
                } else {
                    bar.style.background = 'linear-gradient(to top, #4b0082, #8b0000)';
                }
                
                // Add label
                const label = document.createElement('div');
                label.className = 'bar-label';
                label.textContent = `${index}h`;
                bar.appendChild(label);
                
                // Add tooltip
                bar.title = `${index}:00 - AQI: ${value}`;
                
                chartContainer.appendChild(bar);
            });
        }

        // Refresh data function
        function refreshData() {
            // Show loading state
            const button = event.target;
            button.innerHTML = '<span class="loading"></span> ƒêang c·∫≠p nh·∫≠t...';
            button.disabled = true;
            
            // Simulate API call
            setTimeout(() => {
                // Generate new random data
                currentAQI = Math.floor(Math.random() * 200) + 30;
                
                // Update AQI
                updateAQIDisplay(currentAQI);
                
                // Update pollutants with random values
                document.getElementById('pm25').textContent = (Math.random() * 100).toFixed(1);
                document.getElementById('pm10').textContent = (Math.random() * 150).toFixed(1);
                document.getElementById('o3').textContent = (Math.random() * 200).toFixed(1);
                document.getElementById('no2').textContent = (Math.random() * 100).toFixed(1);
                document.getElementById('so2').textContent = (Math.random() * 50).toFixed(1);
                document.getElementById('co').textContent = (Math.random() * 2).toFixed(1);
                
                // Regenerate chart
                generateChart();
                
                // Update time
                updateTime();
                
                // Reset button
                button.innerHTML = 'üîÑ C·∫≠p Nh·∫≠t';
                button.disabled = false;
            }, 1500);
        }

        // Update time function
        function updateTime() {
            const now = new Date();
            const timeString = now.toLocaleString('vi-VN');
            document.getElementById('lastUpdate').textContent = timeString;
        }

        // Auto refresh every 5 minutes
        setInterval(() => {
            refreshData();
        }, 300000);

        // Initialize on page load
        window.onload = function() {
            updateAQIDisplay(currentAQI);
            generateChart();
            updateTime();
        };

        // City change handler
        document.getElementById('citySelect').addEventListener('change', function() {
            // Update districts based on city
            const districts = {
                'hanoi': ['Qu·∫≠n Ba ƒê√¨nh', 'Qu·∫≠n Ho√†n Ki·∫øm', 'Qu·∫≠n ƒê·ªëng ƒêa', 'Qu·∫≠n Hai B√† Tr∆∞ng'],
                'hcm': ['Qu·∫≠n 1', 'Qu·∫≠n 2', 'Qu·∫≠n 3', 'Qu·∫≠n 4'],
                'danang': ['Qu·∫≠n H·∫£i Ch√¢u', 'Qu·∫≠n Thanh Kh√™', 'Qu·∫≠n S∆°n Tr√†', 'Qu·∫≠n Ng≈© H√†nh S∆°n'],
                'haiphong': ['Qu·∫≠n H·ªìng B√†ng', 'Qu·∫≠n L√™ Ch√¢n', 'Qu·∫≠n Ng√¥ Quy·ªÅn', 'Qu·∫≠n Ki·∫øn An'],
                'cantho': ['Qu·∫≠n Ninh Ki·ªÅu', 'Qu·∫≠n B√¨nh Th·ªßy', 'Qu·∫≠n C√°i RƒÉng', 'Qu·∫≠n √î M√¥n']
            };
            
            const districtSelect = document.getElementById('districtSelect');
            districtSelect.innerHTML = '';
            
            districts[this.value].forEach(district => {
                const option = document.createElement('option');
                option.value = district.toLowerCase().replace(/\s+/g, '');
                option.textContent = district;
                districtSelect.appendChild(option);
            });
            
            refreshData();
        });
    </script>
</body>
</html>
